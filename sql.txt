CREATE TABLE MediaItems(
    MID NUMBER(9,0) PRIMARY KEY,
    TITLE VARCHAR2(200),
    PROD_YEAR NUMBER(4),
    TITLE_LENGTH NUMBER(4)
);
    
CREATE TABLE Similarity(
    MID1 NUMBER(9,0),
    MID2 NUMBER(9,0),
    SIMILARITY FLOAT,
    CONSTRAINT FK_MID1MID FOREIGN KEY (MID1) REFERENCES MediaItems(MID),
    CONSTRAINT FK_MID2MID FOREIGN KEY (MID2) REFERENCES MediaItems(MID),
    CONSTRAINT PK_Similarity PRIMARY KEY (MID1, MID2)
);

CREATE TABLE Users(
    USERID NUMBER(9,0),
    USERNAME VARCHAR2(150),
    PASSWORD VARCHAR2(150),
    FIRST_NAME VARCHAR2 (150),
    LAST_NAME VARCHAR2 (150),
    DATE_OF_BIRTH TIMESTAMP,
    REGISTRATION_DATE TIMESTAMP,
    
    CONSTRAINT PK_Users PRIMARY KEY (USERID)
);

CREATE TABLE Administrators(
    ADMINID NUMBER(9,0),
    USERNAME VARCHAR2(150),
    PASSWORD VARCHAR2(150),
    
    CONSTRAINT PK_Administrators PRIMARY KEY (ADMINID)
);

CREATE TABLE LoginLog(
    USERID NUMBER(9,0),
    LOGINTIME TIMESTAMP,
    
    CONSTRAINT PK_LoginLog PRIMARY KEY (USERID, LOGINTIME),
    CONSTRAINT FK_USERID_LOGINLOG FOREIGN KEY (USERID) REFERENCES Users(USERID)
);

CREATE TABLE History(
    USERID NUMBER(9,0),
    MID NUMBER(9,0),
    VIEWTIME TIMESTAMP,
    
    CONSTRAINT FK_USERID_HISTORY FOREIGN KEY (USERID) REFERENCES Users(USERID),
    CONSTRAINT FK_MID_HISTORY FOREIGN KEY (MID) REFERENCES MediaItems(MID),
    CONSTRAINT PK_History PRIMARY KEY (USERID, MID, VIEWTIME)
);